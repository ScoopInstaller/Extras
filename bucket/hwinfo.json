{
    "version": "8.32-5840",
    "description": "Comprehensive Hardware Analysis, Monitoring and Reporting for Windows and DOS",
    "homepage": "https://www.hwinfo.com/",
    "license": {
        "identifier": "Freeware",
        "url": "https://www.hwinfo.com/licenses"
    },
    "url": "https://downloads.sourceforge.net/project/hwinfo/Windows_Portable/hwi_832.zip",
    "hash": "sha1:2d56090a3f75020d7801d5d7175c791868dfc60c",
    "architecture": {
        "64bit": {
            "pre_install": [
                "Get-ChildItem -Path $dir -Include '*32*', '*ARM*' -Recurse | Remove-Item -Force -ErrorAction SilentlyContinue",
                "Get-ChildItem -Path \"$dir\\*64*\" -Recurse | Rename-Item -NewName { $_.FullName -replace '\\d{2}\\.', '.' }"
            ]
        },
        "32bit": {
            "pre_install": [
                "Get-ChildItem -Path \"$dir\\*32*\" -Recurse | Rename-Item -NewName { $_.FullName -replace '\\d{2}\\.', '.' }",
                "Get-ChildItem -Path $dir -Include '*64*' -Recurse | Remove-Item -Force -ErrorAction SilentlyContinue"
            ]
        },
        "arm64": {
            "pre_install": [
                "Get-ChildItem -Path \"$dir\\*ARM*\" -Recurse | Rename-Item -NewName { $_.FullName -replace '_.+\\.', '.' }",
                "Get-ChildItem -Path $dir -Include '*32*', '*64*' -Recurse | Remove-Item -Force -ErrorAction SilentlyContinue"
            ]
        }
    },
    "installer": {
        "script": [
            "$setting_name = if ($architecture -match '\\d{2}(?=bit)') { 'HWiNFO{0}.INI' -f $matches[0] } else { 'HWiNFO_ARM64.INI' }",
            "if (-not (Test-Path \"$persist_dir\\$setting_name\")) {",
            "    Set-Content -Path \"$dir\\$setting_name\" -Value '[Settings]', 'AutoUpdate=0' -Encoding ASCII",
            "}",
            "persist_data @{ persist = \"$setting_name\" } $original_dir $persist_dir",
            "Get-ChildItem -Path $persist_dir -File -Include '*64_KEY.txt' -Recurse | Copy-Item -Destination $dir -Force"
        ]
    },
    "bin": "HWiNFO.exe",
    "shortcuts": [
        [
            "HWiNFO.exe",
            "HWiNFO"
        ]
    ],
    "pre_uninstall": [
        "Get-ChildItem -Path $dir -File -Include '*64_KEY.txt' -Recurse | Copy-Item -Destination $persist_dir -Force",
        "$setting_name = if ($architecture -match '\\d{2}(?=bit)') { 'HWiNFO{0}.INI' -f $matches[0] } else { 'HWiNFO_ARM64.INI' }",
        "unlink_persist_data @{ persist = \"$setting_name\" } $dir"
    ],
    "checkver": {
        "url": "https://www.hwinfo.com/ver.txt",
        "regex": "^([\\d.-]+)"
    },
    "autoupdate": {
        "url": "https://downloads.sourceforge.net/project/hwinfo/Windows_Portable/hwi_$majorVersion$minorVersion.zip"
    }
}
