{
    "version": "4.6.2",
    "description": "Fast, flexible machine learning library written in C++",
    "homepage": "https://www.mlpack.org/",
    "license": "BSD-3-Clause",
    "url": "https://www.mlpack.org/files/mlpack-4.6.2.msi",
    "hash": "sha256:b1ae8022e889cc414a434c50f2dd1454658e080ef30459b39f45f4ce3dad5a64",
    "installer": {
        "script": [
            "Start-Process -Wait msiexec -ArgumentList '/i', \"$dir\\mlpack-4.6.2.msi\", '/quiet', '/norestart', \"INSTALLDIR=$dir\" -NoNewWindow"
        ]
    },
    "post_install": [
        "Remove-Item \"$dir\\*.msi\" -Force -ErrorAction SilentlyContinue",
        "",
        "# Move files from nested directory to root",
        "$mlpack_source = \"$dir\\PFiles\\mlpack\\Sources\"",
        "if (Test-Path $mlpack_source) {",
        "    Write-Host 'Reorganizing mlpack directory structure...'",
        "    ",
        "    # Move include directory",
        "    if (Test-Path \"$mlpack_source\\include\") {",
        "        Move-Item \"$mlpack_source\\include\" \"$dir\\include\" -Force",
        "        Write-Host 'Moved: include directory'",
        "    }",
        "    ",
        "    # Move lib directory",
        "    if (Test-Path \"$mlpack_source\\lib\") {",
        "        Move-Item \"$mlpack_source\\lib\" \"$dir\\lib\" -Force",
        "        Write-Host 'Moved: lib directory'",
        "    }",
        "    ",
        "    # Move bin directory if exists",
        "    if (Test-Path \"$mlpack_source\\bin\") {",
        "        Move-Item \"$mlpack_source\\bin\" \"$dir\\bin\" -Force",
        "        Write-Host 'Moved: bin directory'",
        "    }",
        "    ",
        "    # Move any other important directories",
        "    Get-ChildItem $mlpack_source -Directory | ForEach-Object {",
        "        if ($_.Name -notin @('include', 'lib', 'bin')) {",
        "            Move-Item $_.FullName \"$dir\\$($_.Name)\" -Force",
        "            Write-Host \"Moved: $($_.Name) directory\"",
        "        }",
        "    }",
        "    ",
        "    # Move any files in the Sources directory",
        "    Get-ChildItem $mlpack_source -File | ForEach-Object {",
        "        Move-Item $_.FullName \"$dir\\$($_.Name)\" -Force",
        "        Write-Host \"Moved: $($_.Name) file\"",
        "    }",
        "    ",
        "    # Remove the now empty PFiles directory",
        "    Remove-Item \"$dir\\PFiles\" -Recurse -Force -ErrorAction SilentlyContinue",
        "    Write-Host 'Cleaned up installation directory structure'",
        "}",
        "",
        "Write-Host 'mlpack installation completed successfully'",
        "if (Test-Path \"$dir\\include\") { Write-Host 'Headers found in include directory' }",
        "if (Test-Path \"$dir\\lib\") { Write-Host 'Libraries found in lib directory' }"
    ],
    "env_set": {
        "MLPACK_ROOT": "$dir",
        "MLPACK_INCLUDE_DIR": "$dir\\include",
        "MLPACK_LIBRARY_DIR": "$dir\\lib"
    },
    "env_add_path": [
        "."
    ],
    "notes": [
        "mlpack has been installed to $dir",
        "Environment variables MLPACK_ROOT, MLPACK_INCLUDE_DIR, and MLPACK_LIBRARY_DIR have been set",
        "Include headers are in: $dir\\include",
        "Libraries are in: $dir\\lib",
        "Binaries are in: $dir\\bin (added to PATH)",
        "For CMake projects, use: find_package(mlpack REQUIRED)"
    ],
    "checkver": {
        "url": "https://www.mlpack.org/download.html",
        "regex": "mlpack-([\\d.]+)\\.msi"
    },
    "autoupdate": {
        "url": "https://www.mlpack.org/files/mlpack-$version.msi"
    }
}
