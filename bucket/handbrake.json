{
    "version": "1.10.2",
    "description": "A tool for converting video from nearly any format to a selection of modern, widely supported codecs.",
    "homepage": "https://handbrake.fr",
    "license": "GPL-2.0-only",
    "suggest": {
        ".NET Desktop Runtime": "extras/windowsdesktop-runtime-lts"
    },
    "architecture": {
        "64bit": {
            "url": "https://github.com/HandBrake/HandBrake/releases/download/1.10.2/HandBrake-1.10.2-x86_64-Win_GUI.zip",
            "hash": "5a64cead359cbc39f453f61f3a2c35748872690d4c3cc9f22b7c04bd8dda625d"
        }
    },
    "extract_dir": "HandBrake",
    "installer": {
        "script": [
            "if (!(Test-Path \"$persist_dir\\portable.ini\")) {",
            "    if (!(Test-Path \"$persist_dir\\storage\") -And (Test-Path \"$env:APPDATA\\HandBrake\")) {",
            "        New-Item \"$persist_dir\" -ItemType Directory -ErrorAction SilentlyContinue | Out-Null",
            "        Move-Item -Path \"$env:APPDATA\\HandBrake\" -Destination \"$persist_dir\\storage\" -Force",
            "    }",
            "    Copy-Item \"$dir\\portable.ini.template\" \"$dir\\portable.ini\" -Force",
            "}"
        ]
    },
    "persist": [
        "portable.ini",
        "storage",
        "tmp"
    ],
    "shortcuts": [
        [
            "HandBrake.exe",
            "HandBrake"
        ]
    ],
    "checkver": {
        "github": "https://github.com/HandBrake/HandBrake"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/HandBrake/HandBrake/releases/download/$version/HandBrake-$version-x86_64-Win_GUI.zip"
            }
        },
        "hash": {
            "url": "https://handbrake.fr/rotation.php?file=$basename",
            "regex": "<td>$sha256</td>"
        }
    }
}
