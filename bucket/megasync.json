{
    "##": [
        "http://g.static.mega.co.nz/eupd/wsync64/v.txt?SCOOPVERCH",
        "https://github.com/meganz/MEGAsync/blob/58d3ed7f4a10d08b0fa908639a65deac6a6bde1b/src/MEGAUpdater/Preferences.h#L9",
        "https://github.com/meganz/MEGAsync/blob/58d3ed7f4a10d08b0fa908639a65deac6a6bde1b/src/MEGASync/control/UpdateTask.cpp#L93-L111"
    ],
    "version": "4.7.3.0",
    "description": "Client for automated synchronization between local folder and MEGA cloud",
    "homepage": "https://mega.nz",
    "license": {
        "identifier": "Freeware",
        "url": "https://github.com/meganz/MEGAsync/blob/master/LICENCE.md"
    },
    "architecture": {
        "64bit": {
            "url": "https://mega.nz/MEGAsyncSetup64.exe#/dl.7z",
            "hash": "3c5db4f98ce373725edf4b8ffb83fdedc7341f08c8514aa339e4ce44f4953e80"
        },
        "32bit": {
            "url": "https://mega.nz/MEGAsyncSetup32.exe#/dl.7z",
            "hash": "eff82de45d729ff5c0d78528e9a3a5a6b851bc059e48a86e277ac9df5487c0eb"
        }
    },
    "pre_install": "Remove-Item \"$dir\\`$*\", \"$dir\\Megaupdater.exe\", \"$dir\\uninst*\" -Recurse",
    "post_install": [
        "$bit = \"$architecture\".Substring(0,2)",
        "7z e -bso0 -bse0 -bsp0 -aou -o\"$dir\" \"$cachedir\\megasync#$version#https_mega.nz_MEGAsyncSetup$bit.exe_dl.7z\" `$R0",
        "if (Test-Path \"$dir\\`$R0\") { if ((7z l -bse0 \"$dir\\`$R0\") -like \"*CPU = x64*\") { Rename-Item \"$dir\\`$R0\" \"$dir\\ShellExtX64.dll\" } else { Rename-Item \"$dir\\`$R0\" \"$dir\\ShellExtX32.dll\" } }",
        "if (Test-Path \"$dir\\`$R0_1\") { if ((7z l -bse0 \"$dir\\`$R0_1\") -like \"*CPU = x64*\") { Rename-Item \"$dir\\`$R0_1\" \"$dir\\ShellExtX64.dll\" } else { Rename-Item \"$dir\\`$R0_1\" \"$dir\\ShellExtX32.dll\" } }",
        "Write-Host -ForegroundColor Blue 'To enable MEGAsync''s context menu and sync indicator icon for files, run the following command as administrator:'",
        "Write-Host -ForegroundColor Yellow \"regsvr32 \"\"$dir\\ShellExtX$bit.dll\"\"\""
    ],
    "uninstaller": {
        "script": "shortcut_folder $global | Split-Path | Join-Path -ChildPath 'MEGAsync' | Remove-Item -ErrorAction 'SilentlyContinue' -Force -Recurse"
    },
    "bin": "MEGAsync.exe",
    "shortcuts": [
        [
            "MEGAsync.exe",
            "MEGAsync"
        ]
    ],
    "checkver": {
        "url": "https://api.github.com/repos/meganz/MEGAsync/releases",
        "regex": "v(\\d+.\\d+.\\d+).\\d+_Win"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://mega.nz/MEGAsyncSetup64.exe#/dl.7z"
            },
            "32bit": {
                "url": "https://mega.nz/MEGAsyncSetup32.exe#/dl.7z"
            }
        }
    }
}
