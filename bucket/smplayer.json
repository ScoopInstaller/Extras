{
    "version": "25.6.0.0",
    "description": "A video player forked from MPV. It can also play Youtube videos, search and download subtitles, and includes other features like a thumbnail generator and audio and video filters.",
    "homepage": "https://www.smplayer.info",
    "license": {
        "identifier": "GPL-2.0-or-later",
        "url": "https://github.com/smplayer-dev/smplayer/blob/master/setup/license.txt"
    },
    "architecture": {
        "64bit": {
            "url": "https://github.com/smplayer-dev/smplayer/releases/download/v25.6.0/smplayer-portable-25.6.0.0-x64.7z",
            "hash": "cff6152744a90080c0ccba29fe54239a7a77037c308bb3866f6451d882787e6d"
        },
        "32bit": {
            "url": "https://github.com/smplayer-dev/smplayer/releases/download/v25.6.0/smplayer-portable-25.6.0.0-win32-qt5.6.7z",
            "hash": "56ea0cd6de27988dbf98d17b4db5837d207f03455894118179dcd4ecd77e7bb8"
        }
    },
    "extract_dir": "smplayer-portable",
    "pre_install": [
        "$cfg = @(",
        "    '[%General]'",
        "    'screenshot_folder={screenshots_dir}'",
        "    '[update_checker]'",
        "    'enabled=false'",
        ")",
        "$cfg_dir = Join-Path -Path $persist_dir -ChildPath 'config\\smplayer.ini'",
        "# Disable automatic update checking and set a placeholder for the screenshots directory path",
        "if (-not (Test-Path -Path $cfg_dir)) {",
        "    info \"File $cfg_dir does not exist. Creating...\"",
        "    ensure (Split-Path -Path $cfg_dir -Parent) | Out-Null",
        "    Set-Content -Path $cfg_dir -Value $cfg -Encoding Ascii",
        "}",
        "# Set the correct screenshots directory, ensuring it is not affected by the `no_junction` configuration",
        "$content = Get-Content -Path $cfg_dir -Encoding Ascii",
        "$screenshots_dir = (Join-Path -Path $dir -ChildPath 'screenshots') -replace '\\\\', '\\\\'",
        "$content -replace '{screenshots_dir}', $screenshots_dir | Set-Content -Path $cfg_dir -Encoding Ascii"
    ],
    "shortcuts": [
        [
            "smplayer.exe",
            "SMPlayer"
        ]
    ],
    "persist": [
        "config",
        "screenshots"
    ],
    "pre_uninstall": [
        "$cfg_dir = Join-Path -Path $persist_dir -ChildPath 'config\\smplayer.ini'",
        "$config_entry = 'screenshot_folder={screenshots_dir}'",
        "$content = Get-Content -Path $cfg_dir -Encoding Ascii",
        "$content -replace 'screenshot_folder=.+', $config_entry | Set-Content -Path $cfg_dir -Encoding Ascii"
    ],
    "checkver": {
        "url": "https://www.smplayer.info/en/download-smplayer-portable",
        "regex": "smplayer-portable-([\\d.]+)-win32-qt(?<qtversion>[\\d.]+)\\.7z"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/smplayer-dev/smplayer/releases/download/v$matchHead/smplayer-portable-$version-x64.7z"
            },
            "32bit": {
                "url": "https://github.com/smplayer-dev/smplayer/releases/download/v$matchHead/smplayer-portable-$version-win32-qt$matchQtversion.7z"
            }
        }
    }
}
