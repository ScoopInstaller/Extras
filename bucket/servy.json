{
    "version": "4.0",
    "description": "Servy lets you run any app as a native Windows service with full control over working directory, startup type, process priority, logging, health checks, pre-launch and post-launch scripts, and parameters.",
    "homepage": "https://servy-win.github.io",
    "license": "MIT",
    "architecture": {
        "64bit": {
            "url": "https://github.com/aelassas/servy/releases/download/v4.0/servy-4.0-x64-installer.exe",
            "hash": "1126aaecb151fe91140c39e247631c1043700bc8733b7a3b48e18525e124c578"
        }
    },
    "notes": [
        "Installer requires admin privileges.",
        "Installs into Scoop's managed folder ($dir).",
        "Installer updates system PATH for global CLI access.",
        "Supports clean uninstallation via unins*.exe."
    ],
    "pre_install": "if (-not (is_admin)) { throw 'This package requires admin privileges to install' }",
    "installer": {
        "args": [
            "/DIR=\"$dir\"",
            "/VERYSILENT",
            "/SUPPRESSMSGBOXES",
            "/NORESTART"
        ]
    },
    "uninstaller": {
        "script": [
            "$installDir = $dir",
            "if (Test-Path $installDir) {",
            "    $uninstaller = Get-ChildItem $installDir -Filter 'unins*.exe' -ErrorAction SilentlyContinue |",
            "                                 Sort-Object LastWriteTime -Descending |",
            "                                 Select-Object -First 1",
            "}",
            "",
            "if ($uninstaller) {",
            "    Start-Process $uninstaller.FullName -ArgumentList '/VERYSILENT /NORESTART /SUPPRESSMSGBOXES' -Wait",
            "} else {",
            "    Write-Warning 'Servy uninstaller not found. It may have already been removed.'",
            "}"
        ]
    },
    "bin": "servy-cli.exe",
    "shortcuts": [
        [
            "Servy.exe",
            "Servy"
        ],
        [
            "Servy.Manager.exe",
            "Servy Manager"
        ]
    ],
    "checkver": {
        "github": "https://github.com/aelassas/servy"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/aelassas/servy/releases/download/v$version/servy-$version-x64-installer.exe"
            }
        }
    }
}
